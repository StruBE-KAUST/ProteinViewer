<!DOCTYPE html>
<html>
	<head>
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Expires" content="-1">
	<meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
	<script src="https://code.jquery.com/jquery-3.2.1.js"></script>
	{% load static %}
	<script src={% static "js/cookie.js" %}></script>
	<script>
	FAILED_STATE = -1
	SUCCESS_STATE = 1

	$(function(){
	  setInterval(check, 1000)
	});  

	function check(){
		$.ajax({
		  async: true,
		  type: 'GET',
		  url: "check/"
		}).done(function(data){
			if(data == SUCCESS_STATE || data == FAILED_STATE){
				// when this reloads, it calls intermediate.py, which decides if viewer.html is loaded or if the form is loaded again
				location.reload(true);
			}
		});
	}
	</script>
	</head>
	<body>
		"Loading"
	</body>
</html>